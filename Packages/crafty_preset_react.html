<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <title>crafty-preset-react - Crafty</title>
    <meta name="description" content="The task runner that binds them all">
    <meta name="author" content="Swissquote Bank SA">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="icon" href="../themes/swissquote/img/favicon.png" type="image/x-icon">

    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- JS -->
    <script>
        window.base_url = "../";
        document.documentElement.classList.remove('no-js');
    </script>

    <!-- Font -->
    
    <!-- CSS -->
            <link href='../themes/swissquote/css/theme.min.css' rel='stylesheet' type='text/css'>
            <link href='../daux_libraries/search.css' rel='stylesheet' type='text/css'>
    </head>
<body class="">
    <div class="Columns content">
    <aside class="Columns__left Collapsible">
        <button type="button" class="Button Collapsible__trigger" aria-controls="sidebar_content" aria-expanded="false" aria-label="Toggle navigation">
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
        </button>

        <a class="Brand" href="../index.html">Crafty</a>

    <form role='search' action="/" method="get" class="Search" id="search_form">
        <label for="search_input">
            <span class='u-visuallyHidden'>Search</span>
        </label>
        <input
            type="search"
            id="search_input"
            class="Search__field"
            placeholder="Search..."
            aria-label="Search..."
            autocomplete="on"
            results=25
            autosave=text_search
        >
        <label>
            <input type="submit" class='u-visuallyHidden' />
            <span class='u-visuallyHidden'>Search...</span>
            <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451">
                <path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/>
            </svg>
        </label>
    </form>

        <div class="Collapsible__content" id="sidebar_content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item '><a href="../Getting_Started.html">Getting Started</a></li><li class='Nav__item  has-children'><a href="../Use_Cases/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>Use Cases</a><ul class='Nav'><li class='Nav__item '><a href="../Use_Cases/Compiling_CSS.html">Compiling CSS</a></li><li class='Nav__item '><a href="../Use_Cases/Compiling_JavaScript.html">Compiling JavaScript</a></li><li class='Nav__item '><a href="../Use_Cases/Compiling_TypeScript.html">Compiling TypeScript</a></li><li class='Nav__item '><a href="../Use_Cases/Compressing_Images.html">Compressing Images</a></li><li class='Nav__item '><a href="../Use_Cases/Testing_your_code.html">Testing your code</a></li></ul></li><li class='Nav__item  has-children'><a href="../User_Guides/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>User Guides</a><ul class='Nav'><li class='Nav__item '><a href="../User_Guides/Configuring_the_build_in_a_blank_project.html">Configuring the build in a blank project</a></li><li class='Nav__item '><a href="../User_Guides/Configuring_the_build_in_a_maven_project.html">Configuring the build in a maven project</a></li><li class='Nav__item '><a href="../User_Guides/Create_a_configuration_file.html">Create a configuration file</a></li><li class='Nav__item '><a href="../User_Guides/Autofix_Resources.html">Autofix Resources</a></li><li class='Nav__item '><a href="../User_Guides/crafty.config.js_Available_Options.html">crafty.config.js Available Options</a></li><li class='Nav__item '><a href="../User_Guides/Developing_Faster_with_Crafty_watch.html">Developing Faster with Crafty watch</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="../Packages/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>Packages</a><ul class='Nav'><li class='Nav__item  has-children'><a href="../Packages/crafty/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>crafty</a><ul class='Nav'><li class='Nav__item '><a href="../Packages/crafty/Anatomy_of_a_preset.html">Anatomy of a preset</a></li><li class='Nav__item '><a href="../Packages/crafty/The_Crafty_instance.html">The Crafty instance</a></li></ul></li><li class='Nav__item '><a href="../Packages/crafty_runner_gulp.html">crafty-runner-gulp</a></li><li class='Nav__item '><a href="../Packages/crafty_runner_rollup.html">crafty-runner-rollup</a></li><li class='Nav__item '><a href="../Packages/crafty_runner_webpack.html">crafty-runner-webpack</a></li><li class='Nav__item  has-children'><a href="../Packages/crafty_preset_babel/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>crafty-preset-babel</a><ul class='Nav'><li class='Nav__item '><a href="../Packages/crafty_preset_babel/JavaScript_Features.html">JavaScript Features</a></li></ul></li><li class='Nav__item  has-children'><a href="../Packages/crafty_preset_eslint/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>crafty-preset-eslint</a><ul class='Nav'><li class='Nav__item '><a href="../Packages/crafty_preset_eslint/ESLint_IDE_Integration.html">ESLint IDE Integration</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_eslint/JavaScript_Linting.html">JavaScript Linting</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_eslint/TypeScript_Linting.html">TypeScript Linting</a></li></ul></li><li class='Nav__item '><a href="../Packages/crafty_preset_images.html">crafty-preset-images</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_images_simple.html">crafty-preset-images-simple</a></li><li class='Nav__item  has-children'><a href="../Packages/crafty_preset_jest/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>crafty-preset-jest</a><ul class='Nav'><li class='Nav__item '><a href="../Packages/crafty_preset_jest/Jest_IDE_Integration.html">Jest IDE Integration</a></li></ul></li><li class='Nav__item '><a href="../Packages/crafty_preset_maven.html">crafty-preset-maven</a></li><li class='Nav__item  has-children'><a href="../Packages/crafty_preset_postcss/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>crafty-preset-postcss</a><ul class='Nav'><li class='Nav__item '><a href="../Packages/crafty_preset_postcss/CSS_Features.html">CSS Features</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_postcss/CSS_Linting.html">CSS Linting</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_postcss/Postcss_Extension_API.html">Postcss Extension API</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_postcss/Stylelint_IDE_Integration.html">Stylelint IDE Integration</a></li></ul></li><li class='Nav__item '><a href="../Packages/crafty_preset_prettier.html">crafty-preset-prettier</a></li><li class='Nav__item Nav__item--active'><a href="../Packages/crafty_preset_react.html">crafty-preset-react</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_swc.html">crafty-preset-swc</a></li><li class='Nav__item  has-children'><a href="../Packages/crafty_preset_typescript/index.html" class="Nav__item__link"><i class="Nav__arrow">&nbsp;</i>crafty-preset-typescript</a><ul class='Nav'><li class='Nav__item '><a href="../Packages/crafty_preset_typescript/Getting_Started_with_TypeScript.html">Getting Started with TypeScript</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_typescript/TypeScript_Features.html">TypeScript Features</a></li><li class='Nav__item '><a href="../Packages/crafty_preset_typescript/TypeScript_Typings.html">TypeScript Typings</a></li></ul></li><li class='Nav__item '><a href="../Packages/babel_preset_swissquote.html">babel-preset-swissquote</a></li><li class='Nav__item '><a href="../Packages/eslint_plugin_swissquote.html">eslint-plugin-swissquote</a></li><li class='Nav__item '><a href="../Packages/postcss_swissquote_preset.html">postcss-swissquote-preset</a></li><li class='Nav__item '><a href="../Packages/stylelint_config_swissquote.html">stylelint-config-swissquote</a></li></ul></li><li class='Nav__item '><a href="../CLI.html">CLI</a></li><li class='Nav__item '><a href="../IDE_Integration.html">IDE Integration</a></li><li class='Nav__item '><a href="../Troubleshooting.html">Troubleshooting</a></li><li class='Nav__item '><a href="../Why.html">Why</a></li></ul>
            <div class="Links">
                                    <hr/>
                                            <a href="https://medium.com/swissquote-engineering" target="_blank"  rel="noopener noreferrer">Technical blog</a>
                        <br />
                                            <a href="https://swissquote.com/" target="_blank"  rel="noopener noreferrer">Swissquote</a>
                        <br />
                                            <a href="http://github.com/swissquote/crafty" target="_blank"  rel="noopener noreferrer">GitHub</a>
                        <br />
                                                </div>

            
            <div class="DarkModeToggler">
                <hr/>
                <label class="Checkbox">Dark Mode                    <input type="checkbox" class="ColorMode__button" />
                    <div class="Checkbox__indicator"></div>
                </label>
            </div>

                
                                    <div class="PoweredBy">
                        <hr/>
                        © 2018 Swissquote Bank SA. Powered by Daux.io.                    </div>
                        </div>
    </aside>
    <div class="Columns__right">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../Packages/index.html">Packages</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../Packages/crafty_preset_react.html">crafty-preset-react</a></h1>
                    </div>

    <div class="s-content">
        <table>
<tr><th>Compatible Runners</th><td>
<ul>
<li>
<a href="crafty_runner_webpack.html">Webpack</a>
</li>
</ul>
</td></tr>
<tr><th>Test Runners</th><td>
<ul>
<li>
<a href="crafty_preset_jest/index.html">Jest</a>
</li>
</ul>
</td></tr>
<tr><th>Related presets</th><td>
<ul>
<li>
<a href="crafty_preset_babel/index.html">Babel</a>
</li>
<li>
<a href="crafty_preset_typescript/index.html">TypeScript</a>
</li>
<li>
<a href="crafty_preset_swc.html">SWC</a>
</li>
<li>
<a href="crafty_preset_jest/index.html">Jest</a>
</li>
</ul>
</td></tr>
</table>
<p>This preset provides Hot Module Replacement in React projects.</p>
<div class="TableOfContentsContainer">
    <h4 class="TableOfContentsContainer__title">Table of Contents</h4>
    <div class="TableOfContentsContainer__content">
        <ul class="TableOfContents">
<li>
<a href="#installation">Installation</a>
</li>
<li>
<a href="#hot-module-replacement">Hot Module Replacement</a>
</li>
<li>
<a href="#react-hot-module-replacement-variants">React Hot Module Replacement variants</a>
<ul>
<li>
<a href="#fast-refresh">Fast Refresh</a>
</li>
<li>
<a href="#react-hot-loader">React Hot Loader</a>
</li>
<li>
<a href="#typescript">TypeScript</a>
</li>
</ul>
</li>
</ul>    </div>
</div>
<h2><a id="installation" href="#installation" class="Permalink" aria-hidden="true" title="Permalink">#</a>Installation</h2>
<pre><code class="hljs bash">npm install @swissquote/crafty-preset-babel --save
</code></pre>
<pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">presets</span>: [
    <span class="hljs-comment">// also works with crafty-preset-typescript or crafty-preset-swc</span>
    <span class="hljs-string">"@swissquote/crafty-preset-babel"</span>, 
    <span class="hljs-string">"@swissquote/crafty-runner-webpack"</span>,
    <span class="hljs-string">"@swissquote/crafty-preset-react"</span>
  ],
  <span class="hljs-attr">js</span>: {
    <span class="hljs-attr">app</span>: {
      <span class="hljs-attr">runner</span>: <span class="hljs-string">"webpack"</span>,
      <span class="hljs-attr">source</span>: <span class="hljs-string">"js/app.js"</span>,
      <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Hot Module Replacement must be enabled for React Hot Loader to work</span>
      <span class="hljs-attr">react</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// React features must be enabled per bundle</span>
    }
  }
};
</code></pre>
<h2><a id="hot-module-replacement" href="#hot-module-replacement" class="Permalink" aria-hidden="true" title="Permalink">#</a>Hot Module Replacement</h2>
<p>When doing modern JavaScript development, the usual process is <strong>Write code</strong>,
<strong>Compile</strong>, <strong>Refresh the browser</strong>.</p>
<ul>
<li>
<code>crafty watch</code> removes the <strong>Compile</strong> step because it’s run automatically.</li>
<li>Hot Module Replacement (HMR) was created to remove the <strong>Refresh the browser</strong>
part.</li>
</ul>
<p>More precisely, when doing a build with Webpack, in development mode, a
Websocket client is added to the build and an HTTP server is started.
When the page is loaded, each bundle will establish a Websocket connection to the server.</p>
<p>When you change a line of code, the server will rebuild them and send a
notification through Websocket to the browser, the browser will then download
the patch and apply the code change.</p>
<p>With React components, it will even re-render them without losing the current
state.</p>
<p>Here’s an example :</p>
<p><img src="../react-hot-loader.gif" alt="React Hot Module Replacement example" /></p>
<h2><a id="react-hot-module-replacement-variants" href="#react-hot-module-replacement-variants" class="Permalink" aria-hidden="true" title="Permalink">#</a>React Hot Module Replacement variants</h2>
<p>There are two ways to make this work</p>
<h3><a id="fast-refresh" href="#fast-refresh" class="Permalink" aria-hidden="true" title="Permalink">#</a>Fast Refresh</h3>
<blockquote>
<p>This variant will work when using the Babel, TypeScript and SWC presets with Webpack.</p>
</blockquote>
<p>Starting with React 16.13, <a href="https://www.npmjs.com/package/@pmmmwh/react-refresh-webpack-plugin" class="Link--external" rel="noopener noreferrer">Fast Refresh</a> is the way to do Hot Module Replacement and doesn’t require to add code to your application to get it to work.
This is the recommended way and will be the default starting with Crafty 1.20.0</p>
<p>To enable it, add these two parameters to your bundle in <code>crafty.config.js</code>:</p>
<pre><code class="hljs javascript">{
  <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">react</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-comment">// also works with</span>
  <span class="hljs-attr">react</span>: {
    <span class="hljs-attr">refreshMode</span>: <span class="hljs-string">"fast"</span>
  }
}
</code></pre>
<p>You’re now ready to run <code>crafty watch</code> and use Fast Refresh on all your components.</p>
<h3><a id="react-hot-loader" href="#react-hot-loader" class="Permalink" aria-hidden="true" title="Permalink">#</a>React Hot Loader</h3>
<blockquote>
<p>This variant will work when using the Babel or TypeScript presets with Webpack.</p>
</blockquote>
<p>Most versions of React can work with <a href="https://www.npmjs.com/package/react-hot-loader" class="Link--external" rel="noopener noreferrer">React Hot Loader</a>, but in some cases can’t keep the component’s state on refresh or don’t support hooks, it’s a deprecated way to do and will be removed from Crafty in the future.</p>
<p>To enable it, add these two parameters to your bundle in <code>crafty.config.js</code>:</p>
<pre><code class="hljs javascript">{
  <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">react</span>: {
    <span class="hljs-attr">refreshMode</span>: <span class="hljs-string">"hot"</span>
  }
}
</code></pre>
<p>Then you must mark your root component as hot-exported :</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { hot } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-hot-loader"</span>;

<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello World!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> hot(<span class="hljs-built_in">module</span>)(App);
</code></pre>
<p>Only the root component needs this wrapping, the child components don’t need it.</p>
<h3><a id="typescript" href="#typescript" class="Permalink" aria-hidden="true" title="Permalink">#</a>TypeScript</h3>
<p>If you’re using TypeScript you have one more step to make</p>
<pre><code class="hljs bash">npm install --save @types/webpack-env
</code></pre>
<p><a href="https://medium.com/@rajaraodv/webpack-hot-module-replacement-hmr-e756a726a07#.6qqb8241p" class="Link--external" rel="noopener noreferrer">Read more about Hot Module Replacement</a></p>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../Packages/crafty_preset_prettier.html">Previous</a></li>            <li class=Pager--next><a href="../Packages/crafty_preset_swc.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    <script>
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'UA-113355094-2', '');
    ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    <!-- JS -->
            <script src="../themes/swissquote/js/daux.min.js"></script>
    
        <script>
        
        window.searchLanguage = "";
        window.searchTranslation = {"Search_one_result":"1 result","Search_results":"!count results","Search_no_results":"Nothing found","Search_common_words_ignored":"Common words are largely ignored","Search_too_short":"Search too short","Search_one_character_or_more":"Should be one character or more","Search_should_be_x_or_more":"Should be !min characters or more","Link_previous":"Previous","Link_next":"Next"};
    </script>

    <!-- Search -->
    <script type="text/javascript" src="../daux_libraries/search.min.js"></script>

    <script>
        window.search({'base_url': '../'})
    </script>
</body>
</html>
